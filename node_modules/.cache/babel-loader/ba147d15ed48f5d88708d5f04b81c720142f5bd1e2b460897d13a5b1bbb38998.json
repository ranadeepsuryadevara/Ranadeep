{"ast":null,"code":"import _createForOfIteratorHelper from \"@babel/runtime-corejs3/helpers/createForOfIteratorHelper\";\nimport _typeof from \"@babel/runtime-corejs3/helpers/typeof\";\nimport _slicedToArray from \"@babel/runtime-corejs3/helpers/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime-corejs3/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs3/regenerator\";\nimport _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\";\nimport _entriesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/entries\";\nimport _Array$from from \"@babel/runtime-corejs3/core-js-stable/array/from\";\nimport _JSON$stringify from \"@babel/runtime-corejs3/core-js-stable/json/stringify\";\nimport _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";\nimport _Object$keys from \"@babel/runtime-corejs3/core-js-stable/object/keys\";\nimport _concatInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/concat\";\nimport _Object$entries from \"@babel/runtime-corejs3/core-js-stable/object/entries\";\nimport _filterInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/filter\";\nimport 'cross-fetch/polyfill';\n/* global fetch */\n\nimport qs from 'qs';\nimport jsYaml from 'js-yaml';\nimport { FormData, File, Blob } from 'formdata-node';\nimport { encodeDisallowedCharacters } from '../execute/oas3/style-serializer.js';\nimport foldFormDataToRequest from './fold-formdata-to-request.node.js'; // For testing\n\nexport var self = {\n  serializeRes: serializeRes,\n  mergeInQueryOrForm: mergeInQueryOrForm\n}; // Handles fetch-like syntax and the case where there is only one object passed-in\n// (which will have the URL as a property). Also serilizes the response.\n\nexport default function http(_x) {\n  return _http.apply(this, arguments);\n} // exported for testing\n\nfunction _http() {\n  _http = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(url) {\n    var request,\n      contentType,\n      res,\n      error,\n      _error,\n      _args = arguments;\n    return _regeneratorRuntime.wrap(function _callee$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            request = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n            if (_typeof(url) === 'object') {\n              request = url;\n              url = request.url;\n            }\n            request.headers = request.headers || {}; // Serializes query, for convenience\n            // Should be the last thing we do, as its hard to mutate the URL with\n            // the search string, but much easier to manipulate the req.query object\n\n            self.mergeInQueryOrForm(request); // Newlines in header values cause weird error messages from `window.fetch`,\n            // so let's massage them out.\n            // Context: https://stackoverflow.com/a/50709178\n\n            if (request.headers) {\n              _Object$keys(request.headers).forEach(function (headerName) {\n                var value = request.headers[headerName];\n                if (typeof value === 'string') {\n                  request.headers[headerName] = value.replace(/\\n+/g, ' ');\n                }\n              });\n            } // Wait for the request interceptor, if it was provided\n            // WARNING: don't put anything between this and the request firing unless\n            // you have a good reason!\n\n            if (!request.requestInterceptor) {\n              _context6.next = 12;\n              break;\n            }\n            _context6.next = 8;\n            return request.requestInterceptor(request);\n          case 8:\n            _context6.t0 = _context6.sent;\n            if (_context6.t0) {\n              _context6.next = 11;\n              break;\n            }\n            _context6.t0 = request;\n          case 11:\n            request = _context6.t0;\n          case 12:\n            // for content-type=multipart\\/form-data remove content-type from request before fetch\n            // so that correct one with `boundary` is set when request body is different than boundary encoded string\n            contentType = request.headers['content-type'] || request.headers['Content-Type']; // TODO(vladimir.gorej@gmail.com): assertion of FormData instance can be removed when migrated to node-fetch@2.x\n\n            if (/multipart\\/form-data/i.test(contentType) && request.body instanceof FormData) {\n              delete request.headers['content-type'];\n              delete request.headers['Content-Type'];\n            } // eslint-disable-next-line no-undef\n\n            _context6.prev = 14;\n            _context6.next = 17;\n            return (request.userFetch || fetch)(request.url, request);\n          case 17:\n            res = _context6.sent;\n            _context6.next = 20;\n            return self.serializeRes(res, url, request);\n          case 20:\n            res = _context6.sent;\n            if (!request.responseInterceptor) {\n              _context6.next = 28;\n              break;\n            }\n            _context6.next = 24;\n            return request.responseInterceptor(res);\n          case 24:\n            _context6.t1 = _context6.sent;\n            if (_context6.t1) {\n              _context6.next = 27;\n              break;\n            }\n            _context6.t1 = res;\n          case 27:\n            res = _context6.t1;\n          case 28:\n            _context6.next = 39;\n            break;\n          case 30:\n            _context6.prev = 30;\n            _context6.t2 = _context6[\"catch\"](14);\n            if (res) {\n              _context6.next = 34;\n              break;\n            }\n            throw _context6.t2;\n          case 34:\n            error = new Error(res.statusText || \"response status is \".concat(res.status));\n            error.status = res.status;\n            error.statusCode = res.status;\n            error.responseError = _context6.t2;\n            throw error;\n          case 39:\n            if (res.ok) {\n              _context6.next = 45;\n              break;\n            }\n            _error = new Error(res.statusText || \"response status is \".concat(res.status));\n            _error.status = res.status;\n            _error.statusCode = res.status;\n            _error.response = res;\n            throw _error;\n          case 45:\n            return _context6.abrupt(\"return\", res);\n          case 46:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee, null, [[14, 30]]);\n  }));\n  return _http.apply(this, arguments);\n}\nexport var shouldDownloadAsText = function shouldDownloadAsText() {\n  var contentType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return /(json|xml|yaml|text)\\b/.test(contentType);\n};\nfunction parseBody(body, contentType) {\n  if (contentType && (contentType.indexOf('application/json') === 0 || contentType.indexOf('+json') > 0)) {\n    return JSON.parse(body);\n  }\n  return jsYaml.load(body);\n} // Serialize the response, returns a promise with headers and the body part of the hash\n\nexport function serializeRes(oriRes, url) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n    _ref$loadSpec = _ref.loadSpec,\n    loadSpec = _ref$loadSpec === void 0 ? false : _ref$loadSpec;\n  var res = {\n    ok: oriRes.ok,\n    url: oriRes.url || url,\n    status: oriRes.status,\n    statusText: oriRes.statusText,\n    headers: serializeHeaders(oriRes.headers)\n  };\n  var contentType = res.headers['content-type'];\n  var useText = loadSpec || shouldDownloadAsText(contentType);\n  var getBody = useText ? oriRes.text : oriRes.blob || oriRes.buffer;\n  return getBody.call(oriRes).then(function (body) {\n    res.text = body;\n    res.data = body;\n    if (useText) {\n      try {\n        var obj = parseBody(body, contentType);\n        res.body = obj;\n        res.obj = obj;\n      } catch (e) {\n        res.parseError = e;\n      }\n    }\n    return res;\n  });\n}\nfunction serializeHeaderValue(value) {\n  var isMulti = _includesInstanceProperty(value).call(value, ', ');\n  return isMulti ? value.split(', ') : value;\n} // Serialize headers into a hash, where mutliple-headers result in an array.\n//\n// eg: Cookie: one\n//     Cookie: two\n//  =  { Cookie: [ \"one\", \"two\" ]\n\nexport function serializeHeaders() {\n  var headers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (typeof _entriesInstanceProperty(headers) !== 'function') return {};\n  return _Array$from(_entriesInstanceProperty(headers).call(headers)).reduce(function (acc, _ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n      header = _ref3[0],\n      value = _ref3[1];\n    acc[header] = serializeHeaderValue(value);\n    return acc;\n  }, {});\n}\nexport function isFile(obj, navigatorObj) {\n  if (!navigatorObj && typeof navigator !== 'undefined') {\n    // eslint-disable-next-line no-undef\n    navigatorObj = navigator;\n  }\n  if (navigatorObj && navigatorObj.product === 'ReactNative') {\n    if (obj && _typeof(obj) === 'object' && typeof obj.uri === 'string') {\n      return true;\n    }\n    return false;\n  }\n  if (typeof File !== 'undefined' && obj instanceof File) {\n    return true;\n  }\n  if (typeof Blob !== 'undefined' && obj instanceof Blob) {\n    return true;\n  }\n  if (ArrayBuffer.isView(obj)) {\n    return true;\n  }\n  return obj !== null && _typeof(obj) === 'object' && typeof obj.pipe === 'function';\n}\nfunction isArrayOfFile(obj, navigatorObj) {\n  return Array.isArray(obj) && obj.some(function (v) {\n    return isFile(v, navigatorObj);\n  });\n}\nvar STYLE_SEPARATORS = {\n  form: ',',\n  spaceDelimited: '%20',\n  pipeDelimited: '|'\n};\nvar SEPARATORS = {\n  csv: ',',\n  ssv: '%20',\n  tsv: '%09',\n  pipes: '|'\n}; // Formats a key-value and returns an array of key-value pairs.\n//\n// Return value example 1: [['color', 'blue']]\n// Return value example 2: [['color', 'blue,black,brown']]\n// Return value example 3: [['color', ['blue', 'black', 'brown']]]\n// Return value example 4: [['color', 'R,100,G,200,B,150']]\n// Return value example 5: [['R', '100'], ['G', '200'], ['B', '150']]\n// Return value example 6: [['color[R]', '100'], ['color[G]', '200'], ['color[B]', '150']]\n\nfunction formatKeyValue(key, input) {\n  var skipEncoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var collectionFormat = input.collectionFormat,\n    allowEmptyValue = input.allowEmptyValue,\n    serializationOption = input.serializationOption,\n    encoding = input.encoding; // `input` can be string\n\n  var value = _typeof(input) === 'object' && !Array.isArray(input) ? input.value : input;\n  var encodeFn = skipEncoding ? function (k) {\n    return k.toString();\n  } : function (k) {\n    return encodeURIComponent(k);\n  };\n  var encodedKey = encodeFn(key);\n  if (typeof value === 'undefined' && allowEmptyValue) {\n    return [[encodedKey, '']];\n  } // file\n\n  if (isFile(value) || isArrayOfFile(value)) {\n    return [[encodedKey, value]];\n  } // for OAS 3 Parameter Object for serialization\n\n  if (serializationOption) {\n    return formatKeyValueBySerializationOption(key, value, skipEncoding, serializationOption);\n  } // for OAS 3 Encoding Object\n\n  if (encoding) {\n    if ([_typeof(encoding.style), _typeof(encoding.explode), _typeof(encoding.allowReserved)].some(function (type) {\n      return type !== 'undefined';\n    })) {\n      var style = encoding.style,\n        explode = encoding.explode,\n        allowReserved = encoding.allowReserved;\n      return formatKeyValueBySerializationOption(key, value, skipEncoding, {\n        style: style,\n        explode: explode,\n        allowReserved: allowReserved\n      });\n    }\n    if (encoding.contentType) {\n      if (encoding.contentType === 'application/json') {\n        // If value is a string, assume value is already a JSON string\n        var json = typeof value === 'string' ? value : _JSON$stringify(value);\n        return [[encodedKey, encodeFn(json)]];\n      }\n      return [[encodedKey, encodeFn(value.toString())]];\n    } // Primitive\n\n    if (_typeof(value) !== 'object') {\n      return [[encodedKey, encodeFn(value)]];\n    } // Array of primitives\n\n    if (Array.isArray(value) && value.every(function (v) {\n      return _typeof(v) !== 'object';\n    })) {\n      return [[encodedKey, _mapInstanceProperty(value).call(value, encodeFn).join(',')]];\n    } // Array or object\n\n    return [[encodedKey, encodeFn(_JSON$stringify(value))]];\n  } // for OAS 2 Parameter Object\n  // Primitive\n\n  if (_typeof(value) !== 'object') {\n    return [[encodedKey, encodeFn(value)]];\n  } // Array\n\n  if (Array.isArray(value)) {\n    if (collectionFormat === 'multi') {\n      // In case of multipart/formdata, it is used as array.\n      // Otherwise, the caller will convert it to a query by qs.stringify.\n      return [[encodedKey, _mapInstanceProperty(value).call(value, encodeFn)]];\n    }\n    return [[encodedKey, _mapInstanceProperty(value).call(value, encodeFn).join(SEPARATORS[collectionFormat || 'csv'])]];\n  } // Object\n\n  return [[encodedKey, '']];\n}\nfunction formatKeyValueBySerializationOption(key, value, skipEncoding, serializationOption) {\n  var _context4;\n  var style = serializationOption.style || 'form';\n  var explode = typeof serializationOption.explode === 'undefined' ? style === 'form' : serializationOption.explode; // eslint-disable-next-line no-nested-ternary\n\n  var escape = skipEncoding ? false : serializationOption && serializationOption.allowReserved ? 'unsafe' : 'reserved';\n  var encodeFn = function encodeFn(v) {\n    return encodeDisallowedCharacters(v, {\n      escape: escape\n    });\n  };\n  var encodeKeyFn = skipEncoding ? function (k) {\n    return k;\n  } : function (k) {\n    return encodeDisallowedCharacters(k, {\n      escape: escape\n    });\n  }; // Primitive\n\n  if (_typeof(value) !== 'object') {\n    return [[encodeKeyFn(key), encodeFn(value)]];\n  } // Array\n\n  if (Array.isArray(value)) {\n    if (explode) {\n      // In case of multipart/formdata, it is used as array.\n      // Otherwise, the caller will convert it to a query by qs.stringify.\n      return [[encodeKeyFn(key), _mapInstanceProperty(value).call(value, encodeFn)]];\n    }\n    return [[encodeKeyFn(key), _mapInstanceProperty(value).call(value, encodeFn).join(STYLE_SEPARATORS[style])]];\n  } // Object\n\n  if (style === 'deepObject') {\n    var _context;\n    return _mapInstanceProperty(_context = _Object$keys(value)).call(_context, function (valueKey) {\n      var _context2;\n      return [encodeKeyFn(_concatInstanceProperty(_context2 = \"\".concat(key, \"[\")).call(_context2, valueKey, \"]\")), encodeFn(value[valueKey])];\n    });\n  }\n  if (explode) {\n    var _context3;\n    return _mapInstanceProperty(_context3 = _Object$keys(value)).call(_context3, function (valueKey) {\n      return [encodeKeyFn(valueKey), encodeFn(value[valueKey])];\n    });\n  }\n  return [[encodeKeyFn(key), _mapInstanceProperty(_context4 = _Object$keys(value)).call(_context4, function (valueKey) {\n    var _context5;\n    return [_concatInstanceProperty(_context5 = \"\".concat(encodeKeyFn(valueKey), \",\")).call(_context5, encodeFn(value[valueKey]))];\n  }).join(',')]];\n}\nfunction buildFormData(reqForm) {\n  /**\n   * Build a new FormData instance, support array as field value\n   * OAS2.0 - when collectionFormat is multi\n   * OAS3.0 - when explode of Encoding Object is true\n   *\n   * This function explicitly handles Buffers (for backward compatibility)\n   * if provided as a values to FormData. FormData can only handle USVString\n   * or Blob.\n   *\n   * @param {Object} reqForm - ori req.form\n   * @return {FormData} - new FormData instance\n   */\n  return _Object$entries(reqForm).reduce(function (formData, _ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n      name = _ref5[0],\n      input = _ref5[1];\n\n    // eslint-disable-next-line no-restricted-syntax\n    var _iterator = _createForOfIteratorHelper(formatKeyValue(name, input, true)),\n      _step;\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _step$value = _slicedToArray(_step.value, 2),\n          key = _step$value[0],\n          value = _step$value[1];\n        if (Array.isArray(value)) {\n          // eslint-disable-next-line no-restricted-syntax\n          var _iterator2 = _createForOfIteratorHelper(value),\n            _step2;\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var v = _step2.value;\n              if (ArrayBuffer.isView(v)) {\n                var blob = new Blob([v]);\n                formData.append(key, blob);\n              } else {\n                formData.append(key, v);\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        } else if (ArrayBuffer.isView(value)) {\n          var _blob = new Blob([value]);\n          formData.append(key, _blob);\n        } else {\n          formData.append(key, value);\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n    return formData;\n  }, new FormData());\n} // Encodes an object using appropriate serializer.\n\nexport function encodeFormOrQuery(data) {\n  /**\n   * Encode parameter names and values\n   * @param {Object} result - parameter names and values\n   * @param {string} parameterName - Parameter name\n   * @return {object} encoded parameter names and values\n   */\n  var encodedQuery = _Object$keys(data).reduce(function (result, parameterName) {\n    // eslint-disable-next-line no-restricted-syntax\n    var _iterator3 = _createForOfIteratorHelper(formatKeyValue(parameterName, data[parameterName])),\n      _step3;\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var _step3$value = _slicedToArray(_step3.value, 2),\n          key = _step3$value[0],\n          value = _step3$value[1];\n        result[key] = value;\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n    return result;\n  }, {});\n  return qs.stringify(encodedQuery, {\n    encode: false,\n    indices: false\n  }) || '';\n} // If the request has a `query` object, merge it into the request.url, and delete the object\n// If file and/or multipart, also create FormData instance\n\nexport function mergeInQueryOrForm() {\n  var req = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _req$url = req.url,\n    url = _req$url === void 0 ? '' : _req$url,\n    query = req.query,\n    form = req.form;\n  var joinSearch = function joinSearch() {\n    for (var _len = arguments.length, strs = new Array(_len), _key = 0; _key < _len; _key++) {\n      strs[_key] = arguments[_key];\n    }\n    var search = _filterInstanceProperty(strs).call(strs, function (a) {\n      return a;\n    }).join('&'); // Only truthy value\n\n    return search ? \"?\".concat(search) : ''; // Only add '?' if there is a str\n  };\n\n  if (form) {\n    var hasFile = _Object$keys(form).some(function (key) {\n      var value = form[key].value;\n      return isFile(value) || isArrayOfFile(value);\n    });\n    var contentType = req.headers['content-type'] || req.headers['Content-Type'];\n    if (hasFile || /multipart\\/form-data/i.test(contentType)) {\n      var formdata = buildFormData(req.form);\n      foldFormDataToRequest(formdata, req);\n    } else {\n      req.body = encodeFormOrQuery(form);\n    }\n    delete req.form;\n  }\n  if (query) {\n    var _url$split = url.split('?'),\n      _url$split2 = _slicedToArray(_url$split, 2),\n      baseUrl = _url$split2[0],\n      oriSearch = _url$split2[1];\n    var newStr = '';\n    if (oriSearch) {\n      var oriQuery = qs.parse(oriSearch);\n      var keysToRemove = _Object$keys(query);\n      keysToRemove.forEach(function (key) {\n        return delete oriQuery[key];\n      });\n      newStr = qs.stringify(oriQuery, {\n        encode: true\n      });\n    }\n    var finalStr = joinSearch(newStr, encodeFormOrQuery(query));\n    req.url = baseUrl + finalStr;\n    delete req.query;\n  }\n  return req;\n} // Wrap a http function ( there are otherways to do this, consider this deprecated )\n\nexport function makeHttp(httpFn, preFetch, postFetch) {\n  postFetch = postFetch || function (a) {\n    return a;\n  };\n  preFetch = preFetch || function (a) {\n    return a;\n  };\n  return function (req) {\n    if (typeof req === 'string') {\n      req = {\n        url: req\n      };\n    }\n    self.mergeInQueryOrForm(req);\n    req = preFetch(req);\n    return postFetch(httpFn(req));\n  };\n}","map":{"version":3,"names":["_createForOfIteratorHelper","_typeof","_slicedToArray","_asyncToGenerator","_regeneratorRuntime","_includesInstanceProperty","_entriesInstanceProperty","_Array$from","_JSON$stringify","_mapInstanceProperty","_Object$keys","_concatInstanceProperty","_Object$entries","_filterInstanceProperty","qs","jsYaml","FormData","File","Blob","encodeDisallowedCharacters","foldFormDataToRequest","self","serializeRes","mergeInQueryOrForm","http","_x","_http","apply","arguments","mark","_callee","url","request","contentType","res","error","_error","_args","wrap","_callee$","_context6","prev","next","length","undefined","headers","forEach","headerName","value","replace","requestInterceptor","t0","sent","test","body","userFetch","fetch","responseInterceptor","t1","t2","Error","statusText","concat","status","statusCode","responseError","ok","response","abrupt","stop","shouldDownloadAsText","parseBody","indexOf","JSON","parse","load","oriRes","_ref","_ref$loadSpec","loadSpec","serializeHeaders","useText","getBody","text","blob","buffer","call","then","data","obj","e","parseError","serializeHeaderValue","isMulti","split","reduce","acc","_ref2","_ref3","header","isFile","navigatorObj","navigator","product","uri","ArrayBuffer","isView","pipe","isArrayOfFile","Array","isArray","some","v","STYLE_SEPARATORS","form","spaceDelimited","pipeDelimited","SEPARATORS","csv","ssv","tsv","pipes","formatKeyValue","key","input","skipEncoding","collectionFormat","allowEmptyValue","serializationOption","encoding","encodeFn","k","toString","encodeURIComponent","encodedKey","formatKeyValueBySerializationOption","style","explode","allowReserved","type","json","every","join","_context4","escape","encodeKeyFn","_context","valueKey","_context2","_context3","_context5","buildFormData","reqForm","formData","_ref4","_ref5","name","_iterator","_step","s","n","done","_step$value","_iterator2","_step2","append","err","f","_blob","encodeFormOrQuery","encodedQuery","result","parameterName","_iterator3","_step3","_step3$value","stringify","encode","indices","req","_req$url","query","joinSearch","_len","strs","_key","search","a","hasFile","formdata","_url$split","_url$split2","baseUrl","oriSearch","newStr","oriQuery","keysToRemove","finalStr","makeHttp","httpFn","preFetch","postFetch"],"sources":["C:/Users/JRS GROUPS/Desktop/React/ftask/node_modules/swagger-client/es/http/index.js"],"sourcesContent":["import _createForOfIteratorHelper from \"@babel/runtime-corejs3/helpers/createForOfIteratorHelper\";\nimport _typeof from \"@babel/runtime-corejs3/helpers/typeof\";\nimport _slicedToArray from \"@babel/runtime-corejs3/helpers/slicedToArray\";\nimport _asyncToGenerator from \"@babel/runtime-corejs3/helpers/asyncToGenerator\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs3/regenerator\";\nimport _includesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/includes\";\nimport _entriesInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/entries\";\nimport _Array$from from \"@babel/runtime-corejs3/core-js-stable/array/from\";\nimport _JSON$stringify from \"@babel/runtime-corejs3/core-js-stable/json/stringify\";\nimport _mapInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/map\";\nimport _Object$keys from \"@babel/runtime-corejs3/core-js-stable/object/keys\";\nimport _concatInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/concat\";\nimport _Object$entries from \"@babel/runtime-corejs3/core-js-stable/object/entries\";\nimport _filterInstanceProperty from \"@babel/runtime-corejs3/core-js-stable/instance/filter\";\nimport 'cross-fetch/polyfill';\n/* global fetch */\n\nimport qs from 'qs';\nimport jsYaml from 'js-yaml';\nimport { FormData, File, Blob } from 'formdata-node';\nimport { encodeDisallowedCharacters } from '../execute/oas3/style-serializer.js';\nimport foldFormDataToRequest from './fold-formdata-to-request.node.js'; // For testing\n\nexport var self = {\n  serializeRes: serializeRes,\n  mergeInQueryOrForm: mergeInQueryOrForm\n}; // Handles fetch-like syntax and the case where there is only one object passed-in\n// (which will have the URL as a property). Also serilizes the response.\n\nexport default function http(_x) {\n  return _http.apply(this, arguments);\n} // exported for testing\n\nfunction _http() {\n  _http = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(url) {\n    var request,\n        contentType,\n        res,\n        error,\n        _error,\n        _args = arguments;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            request = _args.length > 1 && _args[1] !== undefined ? _args[1] : {};\n\n            if (_typeof(url) === 'object') {\n              request = url;\n              url = request.url;\n            }\n\n            request.headers = request.headers || {}; // Serializes query, for convenience\n            // Should be the last thing we do, as its hard to mutate the URL with\n            // the search string, but much easier to manipulate the req.query object\n\n            self.mergeInQueryOrForm(request); // Newlines in header values cause weird error messages from `window.fetch`,\n            // so let's massage them out.\n            // Context: https://stackoverflow.com/a/50709178\n\n            if (request.headers) {\n              _Object$keys(request.headers).forEach(function (headerName) {\n                var value = request.headers[headerName];\n\n                if (typeof value === 'string') {\n                  request.headers[headerName] = value.replace(/\\n+/g, ' ');\n                }\n              });\n            } // Wait for the request interceptor, if it was provided\n            // WARNING: don't put anything between this and the request firing unless\n            // you have a good reason!\n\n\n            if (!request.requestInterceptor) {\n              _context6.next = 12;\n              break;\n            }\n\n            _context6.next = 8;\n            return request.requestInterceptor(request);\n\n          case 8:\n            _context6.t0 = _context6.sent;\n\n            if (_context6.t0) {\n              _context6.next = 11;\n              break;\n            }\n\n            _context6.t0 = request;\n\n          case 11:\n            request = _context6.t0;\n\n          case 12:\n            // for content-type=multipart\\/form-data remove content-type from request before fetch\n            // so that correct one with `boundary` is set when request body is different than boundary encoded string\n            contentType = request.headers['content-type'] || request.headers['Content-Type']; // TODO(vladimir.gorej@gmail.com): assertion of FormData instance can be removed when migrated to node-fetch@2.x\n\n            if (/multipart\\/form-data/i.test(contentType) && request.body instanceof FormData) {\n              delete request.headers['content-type'];\n              delete request.headers['Content-Type'];\n            } // eslint-disable-next-line no-undef\n\n\n            _context6.prev = 14;\n            _context6.next = 17;\n            return (request.userFetch || fetch)(request.url, request);\n\n          case 17:\n            res = _context6.sent;\n            _context6.next = 20;\n            return self.serializeRes(res, url, request);\n\n          case 20:\n            res = _context6.sent;\n\n            if (!request.responseInterceptor) {\n              _context6.next = 28;\n              break;\n            }\n\n            _context6.next = 24;\n            return request.responseInterceptor(res);\n\n          case 24:\n            _context6.t1 = _context6.sent;\n\n            if (_context6.t1) {\n              _context6.next = 27;\n              break;\n            }\n\n            _context6.t1 = res;\n\n          case 27:\n            res = _context6.t1;\n\n          case 28:\n            _context6.next = 39;\n            break;\n\n          case 30:\n            _context6.prev = 30;\n            _context6.t2 = _context6[\"catch\"](14);\n\n            if (res) {\n              _context6.next = 34;\n              break;\n            }\n\n            throw _context6.t2;\n\n          case 34:\n            error = new Error(res.statusText || \"response status is \".concat(res.status));\n            error.status = res.status;\n            error.statusCode = res.status;\n            error.responseError = _context6.t2;\n            throw error;\n\n          case 39:\n            if (res.ok) {\n              _context6.next = 45;\n              break;\n            }\n\n            _error = new Error(res.statusText || \"response status is \".concat(res.status));\n            _error.status = res.status;\n            _error.statusCode = res.status;\n            _error.response = res;\n            throw _error;\n\n          case 45:\n            return _context6.abrupt(\"return\", res);\n\n          case 46:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee, null, [[14, 30]]);\n  }));\n  return _http.apply(this, arguments);\n}\n\nexport var shouldDownloadAsText = function shouldDownloadAsText() {\n  var contentType = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';\n  return /(json|xml|yaml|text)\\b/.test(contentType);\n};\n\nfunction parseBody(body, contentType) {\n  if (contentType && (contentType.indexOf('application/json') === 0 || contentType.indexOf('+json') > 0)) {\n    return JSON.parse(body);\n  }\n\n  return jsYaml.load(body);\n} // Serialize the response, returns a promise with headers and the body part of the hash\n\n\nexport function serializeRes(oriRes, url) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      _ref$loadSpec = _ref.loadSpec,\n      loadSpec = _ref$loadSpec === void 0 ? false : _ref$loadSpec;\n\n  var res = {\n    ok: oriRes.ok,\n    url: oriRes.url || url,\n    status: oriRes.status,\n    statusText: oriRes.statusText,\n    headers: serializeHeaders(oriRes.headers)\n  };\n  var contentType = res.headers['content-type'];\n  var useText = loadSpec || shouldDownloadAsText(contentType);\n  var getBody = useText ? oriRes.text : oriRes.blob || oriRes.buffer;\n  return getBody.call(oriRes).then(function (body) {\n    res.text = body;\n    res.data = body;\n\n    if (useText) {\n      try {\n        var obj = parseBody(body, contentType);\n        res.body = obj;\n        res.obj = obj;\n      } catch (e) {\n        res.parseError = e;\n      }\n    }\n\n    return res;\n  });\n}\n\nfunction serializeHeaderValue(value) {\n  var isMulti = _includesInstanceProperty(value).call(value, ', ');\n\n  return isMulti ? value.split(', ') : value;\n} // Serialize headers into a hash, where mutliple-headers result in an array.\n//\n// eg: Cookie: one\n//     Cookie: two\n//  =  { Cookie: [ \"one\", \"two\" ]\n\n\nexport function serializeHeaders() {\n  var headers = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (typeof _entriesInstanceProperty(headers) !== 'function') return {};\n  return _Array$from(_entriesInstanceProperty(headers).call(headers)).reduce(function (acc, _ref2) {\n    var _ref3 = _slicedToArray(_ref2, 2),\n        header = _ref3[0],\n        value = _ref3[1];\n\n    acc[header] = serializeHeaderValue(value);\n    return acc;\n  }, {});\n}\nexport function isFile(obj, navigatorObj) {\n  if (!navigatorObj && typeof navigator !== 'undefined') {\n    // eslint-disable-next-line no-undef\n    navigatorObj = navigator;\n  }\n\n  if (navigatorObj && navigatorObj.product === 'ReactNative') {\n    if (obj && _typeof(obj) === 'object' && typeof obj.uri === 'string') {\n      return true;\n    }\n\n    return false;\n  }\n\n  if (typeof File !== 'undefined' && obj instanceof File) {\n    return true;\n  }\n\n  if (typeof Blob !== 'undefined' && obj instanceof Blob) {\n    return true;\n  }\n\n  if (ArrayBuffer.isView(obj)) {\n    return true;\n  }\n\n  return obj !== null && _typeof(obj) === 'object' && typeof obj.pipe === 'function';\n}\n\nfunction isArrayOfFile(obj, navigatorObj) {\n  return Array.isArray(obj) && obj.some(function (v) {\n    return isFile(v, navigatorObj);\n  });\n}\n\nvar STYLE_SEPARATORS = {\n  form: ',',\n  spaceDelimited: '%20',\n  pipeDelimited: '|'\n};\nvar SEPARATORS = {\n  csv: ',',\n  ssv: '%20',\n  tsv: '%09',\n  pipes: '|'\n}; // Formats a key-value and returns an array of key-value pairs.\n//\n// Return value example 1: [['color', 'blue']]\n// Return value example 2: [['color', 'blue,black,brown']]\n// Return value example 3: [['color', ['blue', 'black', 'brown']]]\n// Return value example 4: [['color', 'R,100,G,200,B,150']]\n// Return value example 5: [['R', '100'], ['G', '200'], ['B', '150']]\n// Return value example 6: [['color[R]', '100'], ['color[G]', '200'], ['color[B]', '150']]\n\nfunction formatKeyValue(key, input) {\n  var skipEncoding = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  var collectionFormat = input.collectionFormat,\n      allowEmptyValue = input.allowEmptyValue,\n      serializationOption = input.serializationOption,\n      encoding = input.encoding; // `input` can be string\n\n  var value = _typeof(input) === 'object' && !Array.isArray(input) ? input.value : input;\n  var encodeFn = skipEncoding ? function (k) {\n    return k.toString();\n  } : function (k) {\n    return encodeURIComponent(k);\n  };\n  var encodedKey = encodeFn(key);\n\n  if (typeof value === 'undefined' && allowEmptyValue) {\n    return [[encodedKey, '']];\n  } // file\n\n\n  if (isFile(value) || isArrayOfFile(value)) {\n    return [[encodedKey, value]];\n  } // for OAS 3 Parameter Object for serialization\n\n\n  if (serializationOption) {\n    return formatKeyValueBySerializationOption(key, value, skipEncoding, serializationOption);\n  } // for OAS 3 Encoding Object\n\n\n  if (encoding) {\n    if ([_typeof(encoding.style), _typeof(encoding.explode), _typeof(encoding.allowReserved)].some(function (type) {\n      return type !== 'undefined';\n    })) {\n      var style = encoding.style,\n          explode = encoding.explode,\n          allowReserved = encoding.allowReserved;\n      return formatKeyValueBySerializationOption(key, value, skipEncoding, {\n        style: style,\n        explode: explode,\n        allowReserved: allowReserved\n      });\n    }\n\n    if (encoding.contentType) {\n      if (encoding.contentType === 'application/json') {\n        // If value is a string, assume value is already a JSON string\n        var json = typeof value === 'string' ? value : _JSON$stringify(value);\n        return [[encodedKey, encodeFn(json)]];\n      }\n\n      return [[encodedKey, encodeFn(value.toString())]];\n    } // Primitive\n\n\n    if (_typeof(value) !== 'object') {\n      return [[encodedKey, encodeFn(value)]];\n    } // Array of primitives\n\n\n    if (Array.isArray(value) && value.every(function (v) {\n      return _typeof(v) !== 'object';\n    })) {\n      return [[encodedKey, _mapInstanceProperty(value).call(value, encodeFn).join(',')]];\n    } // Array or object\n\n\n    return [[encodedKey, encodeFn(_JSON$stringify(value))]];\n  } // for OAS 2 Parameter Object\n  // Primitive\n\n\n  if (_typeof(value) !== 'object') {\n    return [[encodedKey, encodeFn(value)]];\n  } // Array\n\n\n  if (Array.isArray(value)) {\n    if (collectionFormat === 'multi') {\n      // In case of multipart/formdata, it is used as array.\n      // Otherwise, the caller will convert it to a query by qs.stringify.\n      return [[encodedKey, _mapInstanceProperty(value).call(value, encodeFn)]];\n    }\n\n    return [[encodedKey, _mapInstanceProperty(value).call(value, encodeFn).join(SEPARATORS[collectionFormat || 'csv'])]];\n  } // Object\n\n\n  return [[encodedKey, '']];\n}\n\nfunction formatKeyValueBySerializationOption(key, value, skipEncoding, serializationOption) {\n  var _context4;\n\n  var style = serializationOption.style || 'form';\n  var explode = typeof serializationOption.explode === 'undefined' ? style === 'form' : serializationOption.explode; // eslint-disable-next-line no-nested-ternary\n\n  var escape = skipEncoding ? false : serializationOption && serializationOption.allowReserved ? 'unsafe' : 'reserved';\n\n  var encodeFn = function encodeFn(v) {\n    return encodeDisallowedCharacters(v, {\n      escape: escape\n    });\n  };\n\n  var encodeKeyFn = skipEncoding ? function (k) {\n    return k;\n  } : function (k) {\n    return encodeDisallowedCharacters(k, {\n      escape: escape\n    });\n  }; // Primitive\n\n  if (_typeof(value) !== 'object') {\n    return [[encodeKeyFn(key), encodeFn(value)]];\n  } // Array\n\n\n  if (Array.isArray(value)) {\n    if (explode) {\n      // In case of multipart/formdata, it is used as array.\n      // Otherwise, the caller will convert it to a query by qs.stringify.\n      return [[encodeKeyFn(key), _mapInstanceProperty(value).call(value, encodeFn)]];\n    }\n\n    return [[encodeKeyFn(key), _mapInstanceProperty(value).call(value, encodeFn).join(STYLE_SEPARATORS[style])]];\n  } // Object\n\n\n  if (style === 'deepObject') {\n    var _context;\n\n    return _mapInstanceProperty(_context = _Object$keys(value)).call(_context, function (valueKey) {\n      var _context2;\n\n      return [encodeKeyFn(_concatInstanceProperty(_context2 = \"\".concat(key, \"[\")).call(_context2, valueKey, \"]\")), encodeFn(value[valueKey])];\n    });\n  }\n\n  if (explode) {\n    var _context3;\n\n    return _mapInstanceProperty(_context3 = _Object$keys(value)).call(_context3, function (valueKey) {\n      return [encodeKeyFn(valueKey), encodeFn(value[valueKey])];\n    });\n  }\n\n  return [[encodeKeyFn(key), _mapInstanceProperty(_context4 = _Object$keys(value)).call(_context4, function (valueKey) {\n    var _context5;\n\n    return [_concatInstanceProperty(_context5 = \"\".concat(encodeKeyFn(valueKey), \",\")).call(_context5, encodeFn(value[valueKey]))];\n  }).join(',')]];\n}\n\nfunction buildFormData(reqForm) {\n  /**\n   * Build a new FormData instance, support array as field value\n   * OAS2.0 - when collectionFormat is multi\n   * OAS3.0 - when explode of Encoding Object is true\n   *\n   * This function explicitly handles Buffers (for backward compatibility)\n   * if provided as a values to FormData. FormData can only handle USVString\n   * or Blob.\n   *\n   * @param {Object} reqForm - ori req.form\n   * @return {FormData} - new FormData instance\n   */\n  return _Object$entries(reqForm).reduce(function (formData, _ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n        name = _ref5[0],\n        input = _ref5[1];\n\n    // eslint-disable-next-line no-restricted-syntax\n    var _iterator = _createForOfIteratorHelper(formatKeyValue(name, input, true)),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var _step$value = _slicedToArray(_step.value, 2),\n            key = _step$value[0],\n            value = _step$value[1];\n\n        if (Array.isArray(value)) {\n          // eslint-disable-next-line no-restricted-syntax\n          var _iterator2 = _createForOfIteratorHelper(value),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var v = _step2.value;\n\n              if (ArrayBuffer.isView(v)) {\n                var blob = new Blob([v]);\n                formData.append(key, blob);\n              } else {\n                formData.append(key, v);\n              }\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n        } else if (ArrayBuffer.isView(value)) {\n          var _blob = new Blob([value]);\n\n          formData.append(key, _blob);\n        } else {\n          formData.append(key, value);\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n\n    return formData;\n  }, new FormData());\n} // Encodes an object using appropriate serializer.\n\n\nexport function encodeFormOrQuery(data) {\n  /**\n   * Encode parameter names and values\n   * @param {Object} result - parameter names and values\n   * @param {string} parameterName - Parameter name\n   * @return {object} encoded parameter names and values\n   */\n  var encodedQuery = _Object$keys(data).reduce(function (result, parameterName) {\n    // eslint-disable-next-line no-restricted-syntax\n    var _iterator3 = _createForOfIteratorHelper(formatKeyValue(parameterName, data[parameterName])),\n        _step3;\n\n    try {\n      for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n        var _step3$value = _slicedToArray(_step3.value, 2),\n            key = _step3$value[0],\n            value = _step3$value[1];\n\n        result[key] = value;\n      }\n    } catch (err) {\n      _iterator3.e(err);\n    } finally {\n      _iterator3.f();\n    }\n\n    return result;\n  }, {});\n\n  return qs.stringify(encodedQuery, {\n    encode: false,\n    indices: false\n  }) || '';\n} // If the request has a `query` object, merge it into the request.url, and delete the object\n// If file and/or multipart, also create FormData instance\n\nexport function mergeInQueryOrForm() {\n  var req = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var _req$url = req.url,\n      url = _req$url === void 0 ? '' : _req$url,\n      query = req.query,\n      form = req.form;\n\n  var joinSearch = function joinSearch() {\n    for (var _len = arguments.length, strs = new Array(_len), _key = 0; _key < _len; _key++) {\n      strs[_key] = arguments[_key];\n    }\n\n    var search = _filterInstanceProperty(strs).call(strs, function (a) {\n      return a;\n    }).join('&'); // Only truthy value\n\n\n    return search ? \"?\".concat(search) : ''; // Only add '?' if there is a str\n  };\n\n  if (form) {\n    var hasFile = _Object$keys(form).some(function (key) {\n      var value = form[key].value;\n      return isFile(value) || isArrayOfFile(value);\n    });\n\n    var contentType = req.headers['content-type'] || req.headers['Content-Type'];\n\n    if (hasFile || /multipart\\/form-data/i.test(contentType)) {\n      var formdata = buildFormData(req.form);\n      foldFormDataToRequest(formdata, req);\n    } else {\n      req.body = encodeFormOrQuery(form);\n    }\n\n    delete req.form;\n  }\n\n  if (query) {\n    var _url$split = url.split('?'),\n        _url$split2 = _slicedToArray(_url$split, 2),\n        baseUrl = _url$split2[0],\n        oriSearch = _url$split2[1];\n\n    var newStr = '';\n\n    if (oriSearch) {\n      var oriQuery = qs.parse(oriSearch);\n\n      var keysToRemove = _Object$keys(query);\n\n      keysToRemove.forEach(function (key) {\n        return delete oriQuery[key];\n      });\n      newStr = qs.stringify(oriQuery, {\n        encode: true\n      });\n    }\n\n    var finalStr = joinSearch(newStr, encodeFormOrQuery(query));\n    req.url = baseUrl + finalStr;\n    delete req.query;\n  }\n\n  return req;\n} // Wrap a http function ( there are otherways to do this, consider this deprecated )\n\nexport function makeHttp(httpFn, preFetch, postFetch) {\n  postFetch = postFetch || function (a) {\n    return a;\n  };\n\n  preFetch = preFetch || function (a) {\n    return a;\n  };\n\n  return function (req) {\n    if (typeof req === 'string') {\n      req = {\n        url: req\n      };\n    }\n\n    self.mergeInQueryOrForm(req);\n    req = preFetch(req);\n    return postFetch(httpFn(req));\n  };\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}